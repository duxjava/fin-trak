# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –≥—Ä—É–ø–ø–∞–º

## –ü—Ä–æ–±–ª–µ–º–∞

–°—á–µ—Ç–∞ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –≥—Ä—É–ø–ø–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∞—è –≥—Ä—É–ø–ø–∞ –±—ã–ª–∞ –≤—ã–±—Ä–∞–Ω–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

## –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å—á–µ—Ç–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —á—Ç–æ–±—ã –æ–Ω–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–ª–∏—Å—å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≥—Ä—É–ø–ø–µ.

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. **–§—É–Ω–∫—Ü–∏—è `createAccount`** (`actions/account-actions.ts`)

**–ë—ã–ª–æ:**
```typescript
// –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞
const defaultGroup = await db.query.groups.findFirst({
  where: and(
    eq(groups.createdBy, session.user.id),
    eq(groups.isDefault, 'true')
  ),
});
```

**–°—Ç–∞–ª–æ:**
```typescript
const groupId = formData.get('groupId') as string;
let targetGroupId = groupId;

// –ï—Å–ª–∏ groupId –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –≥—Ä—É–ø–ø—É
if (!targetGroupId) {
  // ... –ø–æ–∏—Å–∫ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã
} else {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —É–∫–∞–∑–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã
  const membership = await db.query.groupMembers.findFirst({
    where: and(
      eq(groupMembers.groupId, targetGroupId),
      eq(groupMembers.userId, session.user.id)
    ),
  });
}
```

### 2. **–§—É–Ω–∫—Ü–∏—è `addTransaction`** (`actions/transaction-actions.ts`)

–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `groupId` –∏–∑ —Ñ–æ—Ä–º—ã.

### 3. **–°—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞–Ω–∏—è** (`app/accounts/create/page.tsx`, `app/transactions/add/page.tsx`)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```typescript
interface CreateAccountPageProps {
  searchParams: {
    group?: string;
  };
}

// –ü–µ—Ä–µ–¥–∞—á–∞ groupId –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
<CreateAccountForm groupId={searchParams.group} />
```

### 4. **–°—Å—ã–ª–∫–∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ** (`app/dashboard/page.tsx`)

**–û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏:**
```typescript
// –ë—ã–ª–æ
href="/accounts/create"
href="/transactions/add"

// –°—Ç–∞–ª–æ
href={`/accounts/create?group=${currentGroupId}`}
href={`/transactions/add?group=${currentGroupId}`}
```

### 5. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ–æ—Ä–º**

**`CreateAccountForm`** –∏ **`AddTransactionForm`** —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∏ `groupId`:
```typescript
interface CreateAccountFormProps {
  groupId?: string;
}

// –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –≤ —Ñ–æ—Ä–º–µ
{groupId && <input type="hidden" name="groupId" value={groupId} />}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –≥—Ä—É–ø–ø–µ**
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å—á–µ—Ç–∞/—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —É–∫–∞–∑–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã
- –ï—Å–ª–∏ `groupId` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

### ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ –≥—Ä—É–ø–ø–µ

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### üéØ **–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
1. **–°—á–µ—Ç–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ** - –Ω–µ –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π
2. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ** - –Ω–µ –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –µ—Å–ª–∏ `groupId` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –≥—Ä—É–ø–ø–µ

### üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±–æ—Ä–∫–∏:**
- ‚úÖ **12 —Å—Ç—Ä–∞–Ω–∏—Ü** —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ **–õ–∏–Ω—Ç–∏–Ω–≥** –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ **–†–∞–∑–º–µ—Ä—ã** –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å

## –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≥—Ä—É–ø–ø—É** —á–µ—Ä–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä –≥—Ä—É–ø–ø
2. **–°–æ–∑–¥–∞–π—Ç–µ —Å—á–µ—Ç** - –æ–Ω –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ
3. **–°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** - –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ
4. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –¥—Ä—É–≥—É—é –≥—Ä—É–ø–ø—É** - —Å—á–µ—Ç–∞ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º–∏

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç —Å—á–µ—Ç–∞ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ!
