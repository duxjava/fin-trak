# Упрощенная система групп в Fin-Trak

## Обзор

Система групп была упрощена для лучшего пользовательского опыта. Теперь каждый пользователь автоматически получает дефолтную группу "Бюджет" при регистрации, и может переключаться между группами через простой селектор.

## Основные изменения

### ✅ Что было убрано:
- Плашка управления группами из дашборда
- Кнопки создания и присоединения к группам из селектора
- API endpoints для управления группами
- Сложные функции управления группами

### ✅ Что было улучшено:
- Дефолтная группа создается автоматически при регистрации
- Название дефолтной группы: "Бюджет"
- Упрощенный селектор групп только для переключения
- Чистый интерфейс без лишних элементов

## Как это работает

### 1. Регистрация пользователя
- При регистрации автоматически создается группа "Бюджет"
- Пользователь становится администратором этой группы
- Все счета и транзакции создаются в этой группе

### 2. Переключение между группами
- Селектор групп в заголовке дашборда
- Простое переключение между доступными группами
- URL обновляется: `/dashboard?group=groupId`

### 3. Работа с данными
- Все счета и транзакции привязываются к текущей группе
- При переключении группы отображаются данные этой группы
- Безопасность: пользователь видит только свои группы

## Технические детали

### Создание дефолтной группы:
```typescript
// В одной транзакции создаются:
// 1. Пользователь
// 2. Группа "Бюджет" с isDefault: 'true'
// 3. Участник группы с ролью 'admin'
```

### Селектор групп:
- Клиентский компонент с `useRouter`
- Обновление URL при переключении
- Отображение текущей группы и роли

### Безопасность:
- Проверка принадлежности к группе при переключении
- Все операции выполняются в контексте текущей группы
- Серверные проверки доступа

## Преимущества упрощенной системы

1. **Простота** - нет сложных кнопок управления
2. **Автоматизация** - дефолтная группа создается автоматически
3. **Чистота** - минималистичный интерфейс
4. **Интуитивность** - понятное переключение между группами
5. **Производительность** - меньше кода, быстрее загрузка

## Файловая структура

### Оставшиеся файлы:
- `components/GroupSelector.tsx` - упрощенный селектор групп
- `actions/group-actions.ts` - только `createDefaultGroup`
- `app/api/auth/register/route.ts` - создание дефолтной группы

### Удаленные файлы:
- `components/GroupManagement.tsx`
- `app/api/groups/create/route.ts`
- `app/api/groups/join/route.ts`
- `app/api/groups/set-default/route.ts`

## Результат

Система стала намного проще и понятнее:
- Пользователи сразу начинают работать после регистрации
- Нет лишних элементов интерфейса
- Простое переключение между группами
- Автоматическое создание дефолтной группы
